{{/* ****** BEGINNING OF HEAD SECTION ********/}}
{{define "meta-title"}}
    <meta charset="UTF-8">
    <title>Test LearnR Webapp</title>
{{end}}

{{define "pixel-dense"}}
    <meta name="viewport" content="width=device-width, initial-scale=1">
{{end}}

{{define "fav-icon1"}}
    <link rel="shortcut icon" type="image/png" href="static/images/favicons/database.png">
{{end}}

{{define "fonts1"}}
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Architects+Daughter&family=Bangers&family=IBM+Plex+Mono:wght@200&family=Nova+Flat&family=Permanent+Marker&display=swap" rel="stylesheet">
{{end}}

{{define "media-queries"}}
    <link rel="stylesheet" type="text/css" href="static/css/main.css">
{{end}}

{{define "javascript"}}
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.4.1.min.js"></script>
{{end}}

{{/******* END OF HEAD SECTION *****/}}
{{/******* SIGN IN SECTION ********/}}
{{define "login_form_section"}}
    <div class="divLoginStuff">
        {{/* Section to sign Users in and create accounts */}}
        <div class="signInAndUpDiv" id="signInAndUpDiv">
            {{/* Div for handling sign-up */}}
            <div class="actionDiv" id="actionDiv1">
                <button class="actionDivButton" onclick="navigateHeader(7)">Sign Up</button>
            </div>
            {{/* Div for handling signing-in */}}
            <div class="actionDiv" id="actionDiv2">
                {{template "signInFormAjax"}}
            </div>
        </div>
    </div>
{{end}}
{{/**** SIGN-IN FORM USING AJAX **/}}
{{define "signInFormAjax"}}
    <div id="divformDivLogin" class="divformDiv">
        <div class="instructUserDiv">
            <p class="formSign">
                Log-In
            </p>
        </div>
        <div class="signInAlignmentDiv">
            {{/* USERNAME */}}
            <div class="labelDiv">
                <p class="labelPText">
                    USERNAME:
                </p>
            </div>
            <div class="inputDiv">
                <input type="text" name="username" placeholder="username" minlength=1 maxlength=20 id="inputTextMobileUN" required/>
                <p class="form-field-err" id="username-err"></p>
            </div>
            {{/* PASSWORD */}}
            <div class="labelDiv">
                <p class="labelPText">
                    PASSWORD:
                </p>
            </div>
            <div class="inputDiv">
                <input type="password" name="password" placeholder="password" minlength=1 maxlength=20 id="inputTextMobilePW" required/>
                <p class="form-field-err" id="password-err"></p>
            </div>
            {{/* SUBMIT BUTTON */}}
            <div class="fieldSection">
                <button id="submitLoginButton">Submit</button>
            </div>
            {{/* INFORMITIVE DIV */}}
            <div class="informativeDiv" id="informativeDivSignIn">
                <p class="informtextP" id="informtextPSignIn"></p>
            </div>
        </div>
    </div>
    <script type="text/javascript">
        //Define elements of the 'Ajax Form'
        var inputTextMobileUN = document.getElementById("inputTextMobileUN");
        var inputTextMobilePW = document.getElementById("inputTextMobilePW");
        var submitLoginButton = document.getElementById("submitLoginButton");
        var informtextPSignIn = document.getElementById("informtextPSignIn");

        /* When clicked, submit the results of the login items;
        if successful, it will redirect to the mainpage with your newly made cookie.
        */
        submitLoginButton.addEventListener("click", function(){
            var LoginData = {
                Username: String(inputTextMobileUN.value),
                Password: String(inputTextMobilePW.value)
            };

            var jsonString = JSON.stringify(LoginData); //stringify JSON

            //Call Ajax to see if password/username are correct
            var xhr = new XMLHttpRequest();
            xhr.open('POST', '/canLogin', true);
            xhr.setRequestHeader("Content-Type", "application/json");
            xhr.addEventListener('readystatechange', function(){
                if (xhr.readyState === XMLHttpRequest.DONE && xhr.status === 200){
                    var Response = xhr.responseText;
                    var SuccessMSG = JSON.parse(Response);
                    if (Number(SuccessMSG.SuccessNum) === 0){
                        //Successful User Search
                        //Clear informtextPSignIn
                        informtextPSignIn.innerHTML = "";
                        informtextPSignIn.innerHTML = SuccessMSG.Message;
                        //This User should have their cookie. Send them to the choice page
                        navigateHeader(3);
                    } else if (Number(SuccessMSG.SuccessNum) === 1){
                        //Failed User Search
                        //Clear informtextPSignIn
                        informtextPSignIn.innerHTML = "";
                        informtextPSignIn.innerHTML = SuccessMSG.Message;
                    } else {
                        //Failed User Search
                        //Clear informtextPSignIn
                        informtextPSignIn.innerHTML = "";
                        informtextPSignIn.innerHTML = "Wrong information returned from server";
                        console.log("Wrong number returned from canLogin: " + SuccessMSG.SuccessNum);
                    }
                }
            });
            xhr.send(jsonString);
        });
    </script>
{{end}} 
{{/****** SIGN UP SECTION ******/}}


{{/***** SIGN UP FORM *******/}}
{{define "ajaxsignup"}}
    {{/* Here is the form setup */}}
    <div id="divformDivSignUp" class="divformDiv">
        {{/* Sign Up Title Instruction */}}
        <div class="instructUserDiv">
            <p class="formSign">
                Sign-Up
            </p>
        </div>
        {{/* Begin signup form */}}
        <div class="signInAlignmentDiv">
            {{/* USERNAME */}}
            <div class="feildsSectionDiv">
                <div class="labelDiv">
                    <p class="labelPText">
                        USERNAME:
                    </p>
                </div>
                <div class="inputDiv">
                    <input type="text" id="username" name="username" placeholder="username" minlength=1 maxlength=20 required>
                    <br>
                    <p id="form-input-info"></p>
                </div>
            </div>
            {{/* FIRSTNAME */}}
            <div class="feildsSectionDiv">
                <div class="labelDiv">
                    <p class="labelPText">
                        FIRSTNAME:
                    </p>
                </div>
                <div class="inputDiv">
                    <input type="text" id="firstname" name="firstname" placeholder="firstname" minlength=1 maxlength=20 required>
                    <br>
                    <p id="form-input-info"></p>
                </div>
            </div>
            {{/* LASTNAME */}}
            <div class="feildsSectionDiv">
                <div class="labelDiv">
                    <p class="labelPText">
                        LASTNAME:
                    </p>
                </div>
                <div class="inputDiv">
                    <input type="text" id="lastname" name="lastname" placeholder="lastname" minlength=1 maxlength=20 required>
                    <br>
                    <p id="form-input-info"></p>
                </div>
            </div>
            {{/* PASSWORD */}}
            <div class="feildsSectionDiv">
                <div class="labelDiv">
                    <p class="labelPText">
                        PASSWORD:
                    </p>
                </div>
                <div class="inputDiv">
                    <input type="password" id="password" name="password" placeholder="Password" minlength=8 maxlength=20 required>
                    <br>
                    <p id="form-input-info2"></p>
                </div>
            </div>
            {{/* CHECK PASSWORD*/}}
            <div class="feildsSectionDiv">
                <div class="labelDiv">
                    <p class="labelPText">
                        RE-TYPE PASSWORD:
                    </p>
                </div>
                <div class="inputDiv">
                    <input type="password" id="passwordRetype" name="passwordRetype" placeholder="Re-type password" minlength=8 maxlength=20 required>
                    <br>
                    <p id="form-input-info2"></p>
                </div>
            </div>
            {{/* EMAIL */}}
            <div class="feildsSectionDiv">
                <div class="labelDiv">
                    <p class="labelPText">
                        Email:
                    </p>
                </div>
                <div class="inputDiv">
                    <input type="email" id="email" name="myEmailInput" placeholder="Enter a valid email" maxlength=50>
                    <!-- Used to inform about status of email -->
                    <p class="labelPText" id="emailOkay">
                        
                    </p>
                </div>
            </div>
            {{/* PRIMARY PHONE NUMBER(S) */}}
            {{/* DEBUG: Need to collect multiple phone numbers; use angular to create new tab(s)*/}}
            <div class="feildsSectionDiv">
                <div class="labelDiv">
                    <p class="labelPText">
                        Primary Phone Numbers:
                    </p>
                </div>
                <div class="inputDiv">
                    <input type="text" id="primaryPhoneNums" name="primaryPhoneNums" placeholder="Primary phone number" minlength=1 maxlength=20>
                    <br>
                    <p id="form-input-info"></p>
                </div>
            </div>
            {{/* TELL US ABOUT YOU */}}
            <div class="feildsSectionDiv">
                <div class="labelDiv">
                    <p class="labelPText">
                        Tell us about you! Why do you want to join LearnR? Inform a friend/family member?
                        Make your own learnR? We'd love to know!
                    </p>
                </div>
                <div class="inputDiv">
                    <textarea class="textareaTellMe" id="textareaTellMe" name="textareaTellMe" placeholder="Let us know!"></textarea>
                </div>
            </div>
            {{/* SUBMIT BUTTON */}}
            <div class="feildsSectionDiv">
                <div class="fieldSection" id="signUpSubmitB">
                    <button id="submitSignUpButton">Submit</button>
                </div>
            </div>
            {{/* INFORMITIVE DIV */}}
            <div class="feildsSectionDiv">
                <div class="informativeDiv" id="informativeDivSignUp">
                    <p class="informtextP" id="informtextPSignUp"></p>
                </div>
            </div>
        </div>
        <div class="informFormDiv" id="informFormDiv">
            <p class="informFormP" id="informFormP"></p>
        </div>
    </div>
{{end}}

{{/**** MAIN_HEADER ****/}}
{{define "header_everywhere"}}
    <header class="every_header">
        <div class="mbHeaderDiv">
            <!--This will contain the sites name/Picture in large font-->
            <div class="namediv">
                <img class="headerImg" src="static/images/png/testTitleCard.png">
            </div>
            <!-- This arranges links to various pages -->
            <div class="navigationHolderDiv">
                <!-- Main Page -->
                <div class="navigationLinkDiv">
                    <p class="navigationLinkP" onclick="navigateHeader(3, 0)">
                        Main Page
                    </p>
                </div>
                <!-- Logout -->
                <div class="navigationLinkDiv">
                    <p class="navigationLinkP" onclick="logOut()">
                        Logout
                    </p>
                </div>
                <!-- Make Organization -->
                <div class="navigationLinkDiv">
                    <p class="navigationLinkP" onclick="navigateHeader(8, 0)">
                        Make Organization
                    </p>
                </div>
                <!-- Create LearnR; NOTE: This should only be 
                visible if the User has at least ONE admin org they are
                apart of -->
                {{$userExampOrg := isAdmin .}}
                {{if eq $userExampOrg 0}}
                    <div class="navigationLinkDiv">
                        <p class="navigationLinkP" onclick="navigateHeader(10, 0)">
                            Make LearnR (Admins Only!)
                        </p>
                    </div>
                {{end}}
                <!-- Send Help -->
                <div class="navigationLinkDiv">
                    <p class="navigationLinkP" onclick="navigateHeader(5, 0)">
                        Send Help
                    </p>
                </div>
                <!-- Learn More -->
                <div class="navigationLinkDiv">
                    <p class="navigationLinkP" onclick="navigateHeader(4, 0)">
                        Learn More
                    </p>
                </div>
            </div>
        </div>
    </header>
{{end}}

{{/* MAKE ORG SECTION */}}
{{define "makeorg"}}
    <div class="divformDiv" id="divFormMakeOrg">
        {{/* Make Org Instruction */}}
        <div class="instructUserDiv">
            <p class="formSign">
                Make your organization here! Tell me the name of your Organization and what you hope
                to inform others about. It could be a political campaign, education on a subject
                you're passionate about, or details for your next big event. What do YOU
                want others to LEARN about and why?
            </p>
        </div>
        {{/* Begin Make LearnR Org */}}
        <div class="signInAlignmentDiv">
            {{/* LEARNR ORG NAME */}}
            <div class="feildsSectionDiv">
                <div class="labelDiv">
                    <p class="labelPText">
                        Name of LearnR Organization:
                    </p>
                </div>
                <div class="inputDiv">
                    <input type="text" id="learnrorgname" name="learnrorgname" placeholder="Name of LearnR Organization" 
                    minlength=1 maxlength=25 required>
                    <br>
                    <p id="inputOrgInfo"></p>
                </div>
            </div>
            {{/* TELL US ABOUT YOUR ORGANIZATION */}}
            <div class="feildsSectionDiv">
                <div class="labelDiv">
                    <p class="labelPText">
                        LearnR Goals:
                    </p>
                </div>
                <div class="inputDiv">
                    <textarea class="textareaTellMe" id="textareaTellMe" name="textareaTellMe"
                     placeholder="Let us know why you want to make a LearnR Organization!"></textarea>
                </div>
            </div>
            {{/* SUBMIT BUTTON */}}
            <div class="feildsSectionDiv">
                <div class="fieldSection" id="signUpSubmitB">
                    <button id="submitLearnR">Submit</button>
                </div>
            </div>
            {{/* INFORMITIVE DIV */}}
            <div class="feildsSectionDiv">
                <div class="informativeDiv" id="informativeDivLearnOrg">
                    <p class="informtextP" id="informtextPLearnOrg"></p>
                </div>
            </div>
        </div>
        <div class="informFormDiv" id="informFormDiv">
            <p class="informFormP" id="informFormP"></p>
        </div>
    </div>
{{end}}

{{/* LEARNR MAKE SECTION */}}
{{define "makelearnr"}}
    <div class="divformDiv" id="divFormMakeLearnr">
        {{/* Make Learnr Instruction */}}
        <div class="instructUserDiv">
            <p class="formSign">
                Make your Learnr here! Add the text messages you'd like to send to your 
                Users below,(160 characters each!). A good Learnr should be respectful. A 
                good Learnr should also be well documented, with links to respectable sources
                or research. Don't be afraid to update your Learnr if that research is updated!
            </p>
        </div>
        {{/* Begin Make LearnR */}}
        <div class="signInAlignmentDiv">
            {{/* LEARNR NAME */}}
            <div class="feildsSectionDiv">
                <div class="labelDiv">
                    <p class="labelPText">
                        Name of LearnR:
                    </p>
                </div>
                <div class="inputDiv">
                    <input type="text" id="learnrname" name="learnrname" placeholder="Name of LearnR" 
                    minlength=1 maxlength=40 required>
                    <br>
                    <p id="inputLearnRInfo"></p>
                </div>
            </div>
            {{/* DESCRIPTION */}}
            <div class="feildsSectionDiv">
                <div class="labelDiv">
                    <p class="labelPText">
                        LearnR Description:
                    </p>
                </div>
                <div class="inputDiv">
                    <textarea class="textareaTellMe" id="textareaTellMe" name="textareaTellMe"
                     placeholder="What is this LearnR about?"></textarea>
                </div>
            </div>
            {{/* WHICH ORGANIZATION */}}
            <div class="feildsSectionDiv">
                <div class="labelDiv">
                    <p class="labelPText">
                        Which Organization is this under?
                    </p>
                </div>
                <div class="inputDiv">
                    <select name="learnrorgs" id="learnrorgs">
                        {{range $element := .}}
                            <option value="{{$element.OrgID}}">{{$element.Name}}</option>
                        {{end}}
                    </select>
                </div>
            </div>
            {{/* TAGS */}}
            <div class="feildsSectionDiv">
                <!-- Hold all the tags in this Div -->
                <div class="resultHolderTagDiv" id="resultHolderTagDiv">

                </div>
                <div class="multiInputHolderDiv">
                    <div class="labelDiv">
                        <p class="labelPText">
                            LearnR Tag:
                        </p>
                    </div>
                    <div class="inputDiv">
                        <textarea class="textareaTellMe" id="tagDesc" name="tagDesc"
                        placeholder="What word describes this LearnR?" minlength=1 maxlength=20 required></textarea>
                        <div class="addLearnRTagDiv" id="addLearnRTagDiv">
                            <button class="addLearnRTagButton" id="addLearnRTagButton" onclick="addLearnRTag()">Add Learnr Tag</button>
                        </div>
                    </div>
                </div>
            </div>
            {{/* LEARNRINFORMS */}}
            <div class="feildsSectionDiv">
                <div class="resultHolderInformDiv" id="resultHolderInformDiv">

                </div>
                <div class="multiInputHolderDiv">
                    <!-- The text text -->
                    <div class="labelDiv">
                        <p class="labelPText">
                            What texts do you want the Reader to have?
                        </p>
                    </div>
                    <div class="inputDiv">
                        <textarea class="textareaTellMe" id="textDesc" name="textDesc"
                        placeholder="What do you want this text to say?" minlength=1 maxlength=160 required></textarea>
                    </div>
                    <!-- Should wait -->
                    <div class="labelDiv">
                        <p class="labelPText">
                            Should this text be given time to be read before sending the next text?
                        </p>
                    </div>
                    <div class="inputDiv">
                        <select name="timewait" id="timewait">
                            <option value="true">True</option>
                            <option value="false">False</option>
                        </select>
                    </div>
                    <!-- Amount of time waiting -->
                    <div class="labelDiv">
                        <p class="labelPText">
                            How much time should the User be waiting?
                        </p>
                    </div>
                    <div class="inputDiv">
                        <input type="number" id="timewaiting" name="timewaiting" 
                        placeholder="Amount of seconds to wait before sending text" minlength=1
                        maxlength=300>
                    </div>
                    <!-- Submit -->
                    <div class="inputDiv">
                        <div class="addLearnRTagDiv" id="addLearnRInformDiv">
                            <button class="addLearnRTagButton" id="addLearnRInformButton" onclick="addInform()">Add Learnr Inform</button>
                        </div>
                    </div>
                </div>
            </div>
            {{/* SUBMIT BUTTON */}}
            <div class="feildsSectionDiv">
                <div class="fieldSection" id="signUpSubmitB">
                    <button id="submitLearnR">Submit</button>
                </div>
            </div>
            {{/* INFORMITIVE DIV */}}
            <div class="feildsSectionDiv">
                <div class="informativeDiv" id="informativeDivLearnOrg">
                    <p class="informtextP" id="informtextPLearnr"></p>
                </div>
            </div>
        </div>
        <div class="informFormDiv" id="informFormDiv">
            <p class="informFormP" id="informFormP"></p>
        </div>
    </div>
{{end}}

{{/*** Javascript sections for data ***/}}
{{/* SEND USER DATA BEGINNING */}}
{{define "setUsername"}}
    <script>
        var variablepassed = "{{.}}";
        setUsername(variablepassed);
    </script>
{{end}}
{{define "setPassword"}}
    <script>
        var variablepassed = "{{.}}";
        setPassword(variablepassed);
    </script>
{{end}}
{{define "setFirstname"}}
    <script>
        var variablepassed = "{{.}}";
        setFirstname(variablepassed);
    </script>
{{end}}
{{define "setLastname"}}
    <script>
        var variablepassed = "{{.}}";
        setLastname(variablepassed);
    </script>
{{end}}
{{define "setPhoneNums"}}
    <script>
        setPhoneNums({{.}});
    </script>
{{end}}
{{define "setUserID"}}
    <script>
        var variablepassed = Number({{.}});
        setUserID({{.}});
    </script>
{{end}}
{{define "setEmail"}}
    <script>
        var variablepassed = String("{{.}}");
        setEmail(variablepassed);
    </script>
{{end}}
{{define "setWhoAre"}}
    <script>
        var variablepassed = "{{.}}";
        setWhoAre(variablepassed);
    </script>
{{end}}
{{define "setAdminOrgs"}}
    <script>
        setAdminOrgs({{.}});
    </script>
{{end}}
{{define "setOrgMember"}}
    <script>
        setOrgMember({{.}});
    </script>
{{end}}
{{define "sendBanned"}}
    <script>
        var variablepassed = Boolean({{.}});
        setBanned(variablepassed);
    </script>
{{end}}
{{define "setDateCreated"}}
    <script>
        var variablepassed = "{{.}}";
        setDateCreated(variablepassed);
    </script>
{{end}}
{{define "setDateUpdated"}}
    <script>
        var variablepassed = "{{.}}";
        setDateUpdated(variablepassed);
    </script>
{{end}}
{{/* SEND USER DATA ENDING */}}

